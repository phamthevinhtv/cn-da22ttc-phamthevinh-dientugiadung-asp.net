@model List<QuocGia>
@{
    var message = TempData["Message"] as string;
    var error = TempData["Error"] as string;
}

@section Styles {
    <link rel="stylesheet" href="~/css/admin.css" asp-append-version="true"/>
}

<div class="admin-product-wrapper">
    <div style="display: flex; justify-content: end; align-items: center; margin-bottom: 12px; gap: 12px;">
        <a asp-action="ChiTietQuocGia" asp-controller="Admin" class="button">Thêm quốc gia</a>
    </div>

    @if (Model.Count > 0)
    {
        <table class="admin-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Tên quốc gia</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var quocGia in Model)
                { 
                    <tr>
                        <td>@quocGia.MaQG</td>
                        <td>@quocGia.TenQG</td>
                        <td>
                            <div class="actions">
                                <a asp-action="ChiTietQuocGia" asp-controller="Admin" asp-route-maQG="@quocGia.MaQG" class="button button-edit">Sửa</a>
                                @{
                                    var coTheSuaXoa = ViewBag.CoTheSuaXoa as Dictionary<int, bool>;
                                    bool coTheXoa = coTheSuaXoa?.ContainsKey(quocGia.MaQG) == true && coTheSuaXoa[quocGia.MaQG];
                                }
                                @if (coTheXoa)
                                {
                                    <form asp-action="XoaQuocGia" asp-controller="Admin" method="post" style="display: inline;" 
                                          onsubmit="return confirm('Bạn có chắc muốn xóa quốc gia này?')">
                                        <input type="hidden" name="maQG" value="@quocGia.MaQG" />
                                        <button type="submit" class="button button-delete">Xóa</button>
                                    </form>
                                }
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    } 
    else
    {
        <p>Danh sách quốc gia hiện đang trống</p>
    }
</div>

@if (!string.IsNullOrEmpty(message))
{
    <script>
        alert(@Html.Raw(Json.Serialize(message)));
    </script>
}
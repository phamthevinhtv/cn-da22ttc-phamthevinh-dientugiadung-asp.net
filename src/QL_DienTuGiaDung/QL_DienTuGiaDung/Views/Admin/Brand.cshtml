@model List<ThuongHieu>
@{
    ViewData["HideSidebar"] = false;
    ViewData["SidebarName"] = "_SidebarAdmin";
    ViewData["SidebarType"] = "PartialView";
    var message = TempData["Message"] as string;
    var error = TempData["Error"] as string;
}

@section Styles {
    <link rel="stylesheet" href="~/css/admin.css" asp-append-version="true"/>
}

<div class="admin-product-wrapper">
    <div style="display: flex; justify-content: end; align-items: center; margin-bottom: 12px; gap: 12px;">
        <a asp-action="BrandDetail" asp-controller="Admin" class="button">Thêm thương hiệu</a>
    </div>

    @if (Model.Count > 0)
    {
        <table class="admin-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Tên thương hiệu</th>
                    <th>Quốc gia</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var brand in Model)
                { 
                    <tr>
                        <td>@brand.MaTH</td>
                        <td>@brand.TenTH</td>
                        <td>@brand.TenQG</td>
                        <td>
                            <div class="actions">
                                <a asp-action="BrandDetail" asp-controller="Admin" asp-route-id="@brand.MaTH" class="button button-edit">Sửa</a>
                                @{
                                    var canDeleteBrands = ViewBag.CanDeleteBrands as Dictionary<int, bool>;
                                    bool canDelete = canDeleteBrands?.ContainsKey(brand.MaTH) == true && canDeleteBrands[brand.MaTH];
                                }
                                @if (canDelete)
                                {
                                    <form asp-action="DeleteBrand" asp-controller="Admin" method="post" style="display: inline;" 
                                          onsubmit="return confirm('Bạn có chắc muốn xóa thương hiệu này?')">
                                        <input type="hidden" name="id" value="@brand.MaTH" />
                                        <button type="submit" class="button button-delete">Xóa</button>
                                    </form>
                                }
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    } 
    else
    {
        <p>Danh sách thương hiệu hiện đang trống</p>
    }
</div>

@if (!string.IsNullOrEmpty(message))
{
    <script>
        alert('@Html.Raw(message)');
    </script>
}

@if (!string.IsNullOrEmpty(error))
{
    <script>
        alert('@Html.Raw(error)');
    </script>
}